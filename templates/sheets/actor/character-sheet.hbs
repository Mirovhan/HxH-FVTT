
<section class="hxh-actor-sheet">
  <header class="sheet-header flexrow">
    <img class="profile" src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
    <div class="header-fields">
      <h1><input name="name" type="text" value="{{actor.name}}" placeholder="Nombre del Personaje"/></h1>
      <div class="grid grid-3">
        <label>Concepto</label>
        <input type="text" name="system.details.concept" value="{{system.details.concept}}"/>
        <span></span>

        <label>Origen</label>
        <input type="text" name="system.details.origin" value="{{system.details.origin}}"/>
        <span></span>

        <label>Facción</label>
        <input type="text" name="system.details.faction" value="{{system.details.faction}}"/>
        <span></span>

        <label>Nivel</label>
        <input type="number" name="system.details.level" value="{{system.details.level}}" min="1"/>
        <span></span>
      </div>
    </div>
  </header>

  <nav class="tabs" data-group="primary">
    <a class="item" data-tab="resumen">{{localize "HXH.Resume"}}</a>
    <a class="item" data-tab="atributos">{{localize "HXH.Attributes"}}</a>
    <a class="item" data-tab="nen">{{localize "HXH.Nen"}}</a>
    <a class="item" data-tab="inventario">{{localize "HXH.Inventory"}}</a>
  </nav>

  <section class="sheet-body">
    <!-- Resumen -->
    <div class="tab" data-group="primary" data-tab="resumen">
      <div class="grid grid-3">
        <div>
          <h3>Aura</h3>
          <div class="pair">
            <input type="number" name="system.attributes.aura.value" value="{{system.attributes.aura.value}}"/>
            <span>/</span>
            <input type="number" name="system.attributes.aura.max" value="{{system.attributes.aura.max}}"/>
          </div>
        </div>
        <div>
          <h3>Stamina</h3>
          <div class="pair">
            <input type="number" name="system.attributes.stamina.value" value="{{system.attributes.stamina.value}}"/>
            <span>/</span>
            <input type="number" name="system.attributes.stamina.max" value="{{system.attributes.stamina.max}}"/>
          </div>
        </div>
        <div>
          <h3>Iniciativa</h3>
          <input type="number" name="system.attributes.initiative.value" value="{{system.attributes.initiative.value}}"/>
        </div>
      </div>

      <h3>{{localize "HXH.Skills"}}</h3>
      <div class="skills grid grid-2">
        {{#each system.skills as |sk key|}}
          <div class="skill-row">
            <label>{{sk.label}}</label>
            <input type="number" name="system.skills.{{key}}.rank" value="{{sk.rank}}" min="0"/>
            <button type="button" class="roll" data-action="roll-skill" data-skill="{{key}}">{{localize "HXH.Roll"}}</button>
          </div>
        {{/each}}
      </div>

      <h3>Hatsus</h3>
      <ol class="items-list">
        {{#each actor.items as |it|}}
          {{#if (eq it.type "hatsu")}}
            <li class="item hxh-hatsu-row" data-item-id="{{it.id}}">
              <img src="{{it.img}}" width="24" height="24"/>
              <div>
                <strong>{{it.name}}</strong>
                <div class="notes">{{{it.system.description}}}</div>
              </div>
              <div>PC: {{it.system.pc.base}} {{#if it.system.pc.mods}} ({{sumMods it.system.pc.mods}}) {{/if}}</div>
              <button type="button" class="toggle" data-action="toggle-hatsu" data-id="{{it.id}}">
                {{#if it.system.enabled}}{{localize "HXH.Disable"}}{{else}}{{localize "HXH.Enable"}}{{/if}}
              </button>
            </li>
          {{/if}}
        {{/each}}
      </ol>

      <p><strong>{{localize "HXH.PCUsed"}}:</strong> {{system.nen.puntos.usados}} / <strong>{{localize "HXH.PCTotal"}}:</strong> {{system.nen.puntos.total}}</p>
    </div>

    <!-- Atributos -->
    <div class="tab" data-group="primary" data-tab="atributos">
      <div class="grid grid-3">
        {{#each system.abilities as |ab key|}}
          <div class="ability">
            <label>{{ab.label}}</label>
            <input type="number" name="system.abilities.{{key}}.value" value="{{ab.value}}" />
          </div>
        {{/each}}
      </div>
    </div>

    <!-- Nen -->
    <div class="tab" data-group="primary" data-tab="nen">
      <div class="grid grid-3">
        <div>
          <h3>Puntos de Hatsu</h3>
          <div class="pair">
            <input type="number" name="system.nen.puntos.total" value="{{system.nen.puntos.total}}"/>
            <span>usados</span>
            <input type="number" name="system.nen.puntos.usados" value="{{system.nen.puntos.usados}}"/>
          </div>
        </div>
        <div>
          <h3>Técnicas</h3>
          <div class="grid grid-2">
            {{#each system.nen.tecnicas as |val k|}}
              <label>{{k}}</label>
              <input type="number" name="system.nen.tecnicas.{{k}}" value="{{val}}"/>
            {{/each}}
          </div>
        </div>
        <div>
          <h3>Afinidades</h3>
          <div class="grid grid-2">
            {{#each system.nen.afinidades as |val k|}}
              <label>{{k}}</label>
              <input type="number" name="system.nen.afinidades.{{k}}" value="{{val}}"/>
            {{/each}}
          </div>
        </div>
      </div>
    </div>

    <!-- Inventario -->
    <div class="tab" data-group="primary" data-tab="inventario">
      <ol class="items-list">
        {{#each actor.items as |it|}}
          <li class="item" data-item-id="{{it.id}}">
            <div class="flexrow">
              <img src="{{it.img}}" width="24" height="24"/>
              <span>{{it.name}} ({{it.type}})</span>
            </div>
          </li>
        {{/each}}
      </ol>
    </div>
  </section>
</section>
